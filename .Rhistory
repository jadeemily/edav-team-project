source("main.R")
View(df)
source("main.R")
source("main.R")
source("main.R")
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&pn=1", flatten=TRUE)
i <- 2
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&&userip=69.136.97.180&format=json&action=employers&pn=",i)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&pn=1", flatten=TRUE)
source("main.R")
source("main.R")
source("main.R")
source("main.R")
source("main.R")
source("main.R")
source("main.R")
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&pn=1", flatten=TRUE)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&pn=1", flatten=TRUE)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&pn=1", flatten=TRUE)
rm(raw_data)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
page_count <- raw_data$response$totalNumberOfPages
for (i in 2:15) {
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&&userip=69.136.97.180&format=json&action=employers&pn=",i)
raw_data <- fromJSON(myurl, flatten=TRUE)
page <- as.data.frame(raw_data$response[5])
df <- rbind(df, page)
}
df$employers.ceo.image.src <- NULL
df$employers.ceo.image.height <- NULL
df$employers.ceo.image.width <- NULL
rm(page)
rm(cauchyValues)
rm(hasDaughter)
rm(heightsCM)
rm(myurl)
rm(weightsK)
rm(raw_data)
View(df)
View(df)
df_save <- df
source("main.R")
source("main.R")
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&pn=11", flatten=TRUE)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&pn=1&minRating=3.0", flatten=TRUE)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&pn=1&minRating=3.0", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=list&pn=1&minRating=3.0", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=list&pn=1&minRating=3.0&radius=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=list&pn=1&minRating=3.0&radius=1&sort=rating", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=list&pn=1&minRating=3.0&radius=1&sort=ratings", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=list&pn=1&minRating=3.0&radius=1&s=ratings", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=list&pn=1&minRating=3.0&radius=1&s=rating", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
source("main.R")
View(df)
industry <- c("accounting", "architecture", "art/design/entertainment",
"banking/loan/insurance",
"beauty/wellness",
"consulting",
"engineering (Non-software)",
"hospitality",
"human resources",
"legal",
"marketing/advertising/pr",
"medical/healthcare",
"non-profit",
"real estate",
"restaurant/food services",
"retail",
"sales",
"science/research",
"software",
"sports/fitness",
"travel/transportation",
"publishing",
"government",
"pharmaceuticals",
"technology")
industry
length(industry)
industry[1]
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&q=industry[1]&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&q=industry[2]&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&q=industry[3]&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&q=industry[4]&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&q=industry[5]&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&q=accounting&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
View(df)
source("main.R")
source("main.R")
rm(df)
source("main.R")
source("main.R")
source("main.R")
source("main.R")
industry <- c("accounting", "architecture", "art/design/entertainment",
"insurance",
"beauty",
"consulting",
"financial",
"hospitality",
"human resources",
"legal",
"advertising",
"healthcare",
"medical",
"non-profit",
"real estate",
"restaurant",
"retail",
"sales",
"science",
"software",
"fitness",
"travel",
"publishing",
"government",
"pharmaceuticals",
"technology")
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&q=accounting&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
j <- 2
i <- 2
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&&userip=69.136.97.180&format=json&action=employers",
"&q=",industry[j],
"&pn=",i)
myurl
raw_data <- fromJSON(myurl, flatten=TRUE)
page <- as.data.frame(raw_data$response[5])
df <- rbind(df, page)
df
dim(df)
dim(page)
page
?fromJSON
?as.data.frame
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&&userip=69.136.97.180&format=json&action=employers",
"&q=",industry[j],
"&pn=",i)
raw_data <- fromJSON(myurl, na = "string", flatten=TRUE)
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&&userip=69.136.97.180&format=json&action=employers",
"&q=",industry[j],
"&pn=",i)
raw_data <- fromJSON(myurl, flatten=TRUE)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
dim(page)
dim(df)
View(page)
View(df)
str(df)
str(page)
rm(df)
rm(page)
source("main.R")
source("main.R")
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&q=accounting&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
dim(df)
i
i <- 2
j <- 2
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&&userip=69.136.97.180&format=json&action=employers",
"&q=",industry[j],
"&pn=",i)
industry
industry <- c("accounting", "architecture", "art/design/entertainment",
"insurance",
"beauty",
"consulting",
"financial",
"hospitality",
"human resources",
"legal",
"advertising",
"healthcare",
"medical",
"non-profit",
"real estate",
"restaurant",
"retail",
"sales",
"science",
"software",
"fitness",
"travel",
"publishing",
"government",
"pharmaceuticals",
"technology")
myurl
raw_data <- fromJSON(myurl, flatten=TRUE)
str(raw_data)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
dim(page)
View(page)
j <- 3
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&&userip=69.136.97.180&format=json&action=employers",
"&q=",industry[j],
"&pn=",i)
raw_data <- fromJSON(myurl, flatten=TRUE)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
dim(page)
industry[3]
rm(industry)
source)
source("main.R")
source("main.R")
industry <- c("accounting",
"architecture",
"art",
"design",
"entertainment",
"insurance",
"beauty",
"consulting",
"financial",
"hospitality",
"human resources",
"legal",
"advertising",
"healthcare",
"medical",
"non-profit",
"real estate",
"restaurant",
"retail",
"sales",
"science",
"software",
"fitness",
"travel",
"publishing",
"government",
"pharmaceuticals",
"technology")
rm(df)
rm(page)
source("main.R")
industry
i
j
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&q=accounting&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&&userip=69.136.97.180&format=json&action=employers",
"&q=",industry[j],
"&pn=",i)
myurl
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers",
"&q=",industry[j],
"&pn=",i)
raw_data <- fromJSON(myurl, flatten=TRUE)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
df <- rbind(df, page)
raw_data <- fromJSON(myurl, flatten=TRUE)
dim(raw_data)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
dim(page)
dim(df)
dim(df) <- dim(page)
View(page)
View(df)
df$employers.ceo.image.src <- NULL
df$employers.ceo.image.height <- NULL
df$employers.ceo.image.width <- NULL
dim(df)
dim(page)
df <- rbind(df, page)
View(df)
source("main.R")
i <- 2
j <- 2
industry
source("main.R")
raw_data <- fromJSON("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers&q=accounting&pn=1", flatten=TRUE)
df <- as.data.frame(raw_data$response[5])
df$employers.ceo.image.src <- NULL
df$employers.ceo.image.height <- NULL
df$employers.ceo.image.width <- NULL
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers",
"&q=",industry[j],
"&pn=",i)
raw_data <- fromJSON(myurl, flatten=TRUE)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
dim(page)
dim(df)
View(page)
?fromJSON
i
j
myurl <- paste0("http://api.glassdoor.com/api/api.htm?v=1&format=json&t.p=31640&t.k=j3G7m4V1Dbg&action=employers&",
"city=new%20%york&state=ny&userip=69.136.97.180&format=json&action=employers",
"&q=",industry[j],
"&pn=",i)
raw_data <- fromJSON(myurl, simplifyVector=TRUE, simplifyDataFrame=simplifyVector, flatten=TRUE)
raw_data <- fromJSON(myurl, simplifyVector=TRUE, simplifyDataFrame=TRUE, flatten=TRUE)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
dim(page)
dim(df)
raw_data <- fromJSON(myurl, simplifyVector=FALSE, simplifyDataFrame=FALSE, flatten=TRUE)
dim(raw_data)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
dim(page)
View(page)
raw_data <- fromJSON(myurl, simplifyVector=FALSE, simplifyDataFrame=TRUE, flatten=TRUE)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
dim(page)
raw_data <- fromJSON(myurl, simplifyVector=TRUE, simplifyDataFrame=TRUE, flatten=TRUE)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
dim(page)
source("main.R")
?try
source("main.R")
source("main.R")
source("main.R")
source("main.R")
source("main.R")
rm(df)
rm(page)
rm(raw_data)
rm(k)
rm(page_count)
source("main.R")
rm(i)
rm(j)
source("main.R")
View(df)
source("main.R")
source("main.R")
source("main.R")
source("main.R")
i <- 1
myurl <- paste0("https://api.import.io/store/data/ba547b57-49f4-432a-a57e-61cea9cf8c7d/_query?",
"input/webpage/url=http%3A%2F%2Fwww.glassdoor.com%2FReviews%2Fnew-york-city-reviews-SRCH_IL.0%2C13_IM615_IP",
i,".htm&_user=94bbcc50-59b1-4168-9603-de5452fdedc6&_apikey=965MxL5U2UA5P18W4iNt7flPxtn%2FMr5RF%2",
"BeyT6K3YbylHhH8tGDEnfWggAXViyTkAN94n2PexcJ1EUv45tWMTA%3D%3D")
myurl
raw_data <- fromJSON(myurl, flatten=TRUE)
page <- as.data.frame(raw_data$response[5], stringsAsFactors=FALSE)
page <- as.data.frame(raw_data$results)
View(page)
company_names <- raw_data$results[11]
View(company_names)
num_reviews <- raw_data$results[2]
View(num_reviews)
headquarters <- rawa_data$results[4]
headquarters <- raw_data$results[4]
View(headquarters)
num_reviews <- raw_data$results[7]
View(num_reviews)
page <- as.data.frame(raw_data$response[,c(11,8,4,7,6,9,10)]
)
page <- as.data.frame(raw_data$response[,11])
View(page)
page <- as.data.frame(company_names, num_reviews, headquarters)
page <- as.data.frame(company_names)
View(page)
page <- cbind(page, num_reviews)
View(page)
source("getdata.R")
i <- 1
myurl <- paste0("https://api.import.io/store/data/ba547b57-49f4-432a-a57e-61cea9cf8c7d/_query?",
"input/webpage/url=http%3A%2F%2Fwww.glassdoor.com%2FReviews%2Fnew-york-city-reviews-SRCH_IL.0%2C13_IM615_IP",
i,".htm&_user=94bbcc50-59b1-4168-9603-de5452fdedc6&_apikey=965MxL5U2UA5P18W4iNt7flPxtn%2FMr5RF%2",
"BeyT6K3YbylHhH8tGDEnfWggAXViyTkAN94n2PexcJ1EUv45tWMTA%3D%3D")
myurl
raw_data <- fromJSON(myurl, flatten=TRUE)
headquarters   <- raw_data$results[4]
company_url    <- raw_data$results[6]
num_reviews    <- raw_data$results[7]
overall_rating <- raw_data$results[8]
review_summary <- raw_data$results[9]
company_name   <- raw_data$results[11]
rm(page)
page <- as.data.frame(company_name, stringsAsFactors=FALSE)
View(page)
page <- cbind(page, overall_rating)
page <- cbind(page, num_reviews)
page <- cbind(page, company_url)
page <- cbind(page, headquarters)
page <- cbind(page, review_summary)
View(page)
name(page)[1] <- company_name
names(page)[1] <- "company_name"
View(page)
source("getdata.R")
source("getdata.R")
View(df)
source("getdata.R")
View(df)
source("getdata.R")
?try
?tryCatch
source("getdata.R")
rm(j)
i
myurl
result <- try(raw_data <- fromJSON(myurl, flatten=TRUE), silent=TRUE)
result
if (class(result) != "try-error") {
headquarters   <- raw_data$results[4]
company_url    <- raw_data$results[6]
num_reviews    <- raw_data$results[7]
overall_rating <- raw_data$results[8]
review_summary <- raw_data$results[9]
company_name   <- raw_data$results[11]
page <- as.data.frame(company_name, stringsAsFactors=FALSE)
page <- cbind(page, overall_rating)
page <- cbind(page, num_reviews)
page <- cbind(page, company_url)
page <- cbind(page, headquarters)
page <- cbind(page, review_summary)
names(page)[1] <- "company_name"
if (i > 1) {
df <- rbind(df, page)
} else {
df <- page
}
}
View(df)
View(page)
company_name
review_summary
raw_data$results$headquarters
raw_data$results$name/_text
company_name   <- raw_data$results$name\/_text
raw_data$results$name
raw_data$results$name/_text
raw_data$results$`name/_text`
source("getdata.R")
View(df)
i
myurl
write.csv(df, "gd_data1.csv", row.names=TRUE)
View(df)
source("getdata.R")
write.csv(df, "gd_data2.csv", row.names=TRUE)
source("get_companies.R")
source("get_companies.R")
source("get_companies.R")
source("get_companies.R")
for (i in 1:1973) {
myurl <- paste0("https://api.import.io/store/data/ba547b57-49f4-432a-a57e-61cea9cf8c7d/_query?",
"input/webpage/url=http%3A%2F%2Fwww.glassdoor.com%2FReviews%2Fnew-york-city-reviews-SRCH_IL.0%2C13_IM615_IP",
i,".htm&_user=94bbcc50-59b1-4168-9603-de5452fdedc6&_apikey=965MxL5U2UA5P18W4iNt7flPxtn%2FMr5RF%2",
"BeyT6K3YbylHhH8tGDEnfWggAXViyTkAN94n2PexcJ1EUv45tWMTA%3D%3D")
result <- try(raw_data <- fromJSON(myurl, flatten=TRUE), silent=TRUE)
if (class(result) != "try-error") {
headquarters    <- raw_data$results$headquarters
company_url     <- raw_data$results$company_url
num_reviews     <- raw_data$results$num_reviews
overall_rating  <- raw_data$results$overall_rating
review_summary  <- raw_data$results$review_summary
company_name    <- raw_data$results$`name/_text`
link_to_reviews <- raw_data$results$num_reviews_link
page <- as.data.frame(company_name, stringsAsFactors=FALSE)
page <- cbind(page, overall_rating)
page <- cbind(page, num_reviews)
page <- cbind(page, company_url)
page <- cbind(page, headquarters)
page <- cbind(page, review_summary)
page <- cbind(page, link_to_reviews)
names(page)[1] <- "company_name"
if (i > 1) {
df <- rbind(df, page)
} else {
df <- page
}
}
}
View(df)
df_save2 <- df
source("get_companies.R")
View(df)
nrow(df)
df[19709,]
i <- 0
source("get_companies.R")
View(page)
write.csv(df, "gd_data.csv", row.names=TRUE)
